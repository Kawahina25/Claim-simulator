<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>難易度選択 - カスタマーマスター</title> <!-- タイトルを業務的に変更 -->
    <link rel="stylesheet" href="css/Level.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesomeアイコンライブラリを読み込むよ。ボタンアイコンに使うね -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container bg-white p-8 rounded-xl shadow-lg border border-gray-200">
        <div class="flex justify-start mb-8"> <!-- 下マージンを増やしてゆとりを持たせるよ -->
            <a href="start.html" class="back-button-link"> <!-- 戻るボタンのリンクを囲むよ -->
                <button id="backButton" class="px-6 py-3 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300 transition duration-200 ease-in-out shadow-sm flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i>戻る
                </button>
            </a>
        </div>

        <h1 class="main-title text-center mb-8">難易度設定</h1> <!-- タイトルを統一 -->

        <div class="space-y-8"> <!-- ボタン間の間隔をスタート画面と合わせるよ -->
            <a href="#" class="block mx-auto max-w-sm"> <!-- ボタンの最大幅をmax-w-smに制限し、中央に配置するよ -->
                <button id="normalMode" class="difficulty-button action-button w-full p-6 text-white font-bold text-2xl relative overflow-hidden group">
                    <span class="absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-700 transition-all duration-300 ease-out group-hover:to-blue-800"></span>
                    <span class="relative z-10 flex flex-col items-center justify-center">
                        <span class="text-2xl font-bold mb-2">ノーマルモード</span>
                        <span class="text-lg opacity-90">優しいお客さん</span>
                    </span>
                </button>
            </a>

            <a href="hard.html" class="block mx-auto max-w-sm"> <!-- ボタンの最大幅をmax-w-smに制限し、中央に配置するよ -->
                <button id="hardMode" class="difficulty-button action-button w-full p-6 text-white font-bold text-2xl relative overflow-hidden group">
                    <span class="absolute inset-0 bg-gradient-to-r from-red-500 to-red-700 transition-all duration-300 ease-out group-hover:to-red-800"></span>
                    <span class="relative z-10 flex flex-col items-center justify-center">
                        <span class="text-2xl font-bold mb-2">ハードモード</span>
                        <span class="text-lg opacity-90">厳しめなお客さん</span>
                    </span>
                </button>
            </a>

            <a href="#" class="block mx-auto max-w-sm"> <!-- ボタンの最大幅をmax-w-smに制限し、中央に配置するよ -->
                <button id="crazyMode" class="difficulty-button action-button w-full p-6 text-white font-bold text-2xl relative overflow-hidden group">
                    <span class="absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300 ease-out group-hover:to-purple-600"></span>
                    <span class="relative z-10 flex flex-col items-center justify-center">
                        <span class="text-2xl font-bold mb-2">クレイジーモード</span>
                        <span class="text-lg opacity-90">イカれたお客さん</span>
                    </span>
                </button>
            </a>
        </div>
    </div>

    <!-- BGM用のオーディオタグのパスをmv/startbgm.mp3に修正するよ -->
    <audio id="backgroundMusic" autoplay loop>
      <source src="mv/startbgm.mp3" type="audio/mpeg">
      あなたのブラウザはオーディオタグをサポートしていません。
    </audio>

    <script>
  document.addEventListener('DOMContentLoaded', () => {
    const SETTINGS_KEYS = {
      VIDEO_ENABLED: 'videoEnabled',
      MUSIC_ENABLED: 'musicEnabled',
      COLOR_INVERSION_ENABLED: 'colorInversionEnabled',
      BGM_VOLUME: 'bgmVolume', // BGM音量も読み込む
      SFX_VOLUME: 'sfxVolume'  // 効果音量も読み込む
    };

    // 色反転設定の適用
    const savedColorInversionEnabled = localStorage.getItem(SETTINGS_KEYS.COLOR_INVERSION_ENABLED);
    if (savedColorInversionEnabled === 'true') {
      document.body.classList.add('color-inverted');
    } else {
      document.body.classList.remove('color-inverted');
    }

    // 音楽設定の適用 (BGM)
    const savedMusicEnabled = localStorage.getItem(SETTINGS_KEYS.MUSIC_ENABLED);
    const backgroundMusic = document.getElementById('backgroundMusic');
    if (backgroundMusic) {
      if (savedMusicEnabled === 'false') {
        backgroundMusic.muted = true;
        backgroundMusic.pause(); // ミュートだけでなく停止もする
      } else {
        backgroundMusic.muted = false;
        const savedBGMVolume = localStorage.getItem(SETTINGS_KEYS.BGM_VOLUME);
        if (savedBGMVolume !== null) {
          backgroundMusic.volume = parseFloat(savedBGMVolume);
        }
        // ユーザーインタラクションがないとplay()がブロックされる場合があるので、
        // 各ページのbodyクリックイベントでplay()を試みるロジックと連携
        backgroundMusic.play().catch(error => {
          // 自動再生がブロックされた場合でもエラーをコンソールに出力する
          console.warn("BGMの自動再生がブロックされました (共通スクリプト):", error);
        });
      }
    }

    // 動画設定の適用 (game_over.html, game_clear.html の全画面動画)
    const savedVideoEnabled = localStorage.getItem(SETTINGS_KEYS.VIDEO_ENABLED);
    const fullscreenVideoContainer = document.getElementById('fullscreenVideoContainer');
    const fullscreenVideo = document.getElementById('fullscreenGameOverVideo') || document.getElementById('fullscreenGameClearVideo');

    if (fullscreenVideoContainer && fullscreenVideo) {
      if (savedVideoEnabled === 'false') {
        fullscreenVideoContainer.classList.add('hidden-content');
        fullscreenVideo.pause();
        const mainContent = document.getElementById('mainGameOverContent') || document.getElementById('mainGameClearContent');
        if (mainContent) {
          mainContent.classList.remove('hidden-content');
        }
      } else {
        fullscreenVideoContainer.classList.remove('hidden-content'); // 表示を確実にする
      }
    }
  });
</script>


    <script src="js/Level.js"></script>
</body>
</html>
